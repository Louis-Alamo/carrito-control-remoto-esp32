<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control Digital - Modo Carrera</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1f35 0%, #2d3548 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: white;
            overflow: hidden;
        }

        .menu-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: #3d4456;
            border: none;
            padding: 15px 20px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 4px;
            z-index: 100;
        }

        .menu-btn span {
            width: 30px;
            height: 3px;
            background: white;
            border-radius: 2px;
        }

        .header-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 20px 20px;
            gap: 15px;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0;
        }

        .status-panel {
            background: #2d3548;
            padding: 20px 30px;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            display: flex;
            gap: 20px;
            min-width: 400px;
        }

        .status-label {
            flex: 1;
            background: #1e2433;
            padding: 12px 20px;
            border-radius: 12px;
            font-size: 1rem;
            color: #9ca3af;
            text-align: center;
            transition: all 0.2s ease;
        }

        .status-label.active {
            background: #3d4456;
            color: #ffffff;
        }

        .controls-bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            padding: 30px;
            gap: 20px;
        }

        .center-controls {
            background: #2d3548;
            padding: 20px;
            border-radius: 20px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            box-shadow: 0 -5px 30px rgba(0, 0, 0, 0.4);
            max-width: 500px;
        }

        .function-btn {
            width: 80px;
            height: 80px;
            background: #4a5568;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            font-size: 1.8rem;
            color: white;
            transition: all 0.2s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
            user-select: none;
        }

        .function-btn .btn-text {
            font-size: 0.6rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .function-btn:active {
            transform: scale(0.95);
        }

        /* Estados de las luces direccionales */
        .function-btn.blink-active {
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { 
                background: #4a5568;
                box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
            }
            50% { 
                background: #f59e0b;
                box-shadow: 0 0 20px rgba(245, 158, 11, 0.6);
            }
        }

        /* Preventivas */
        #btnHazard.blink-active {
            animation: blinkRed 1s infinite;
        }

        @keyframes blinkRed {
            0%, 100% { 
                background: #4a5568;
                box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
            }
            50% { 
                background: #dc2626;
                box-shadow: 0 0 20px rgba(220, 38, 38, 0.6);
            }
        }

        /* Estados de luces */
        #btnLights.lights-off {
            background: #4a5568;
        }

        #btnLights.lights-low {
            background: linear-gradient(135deg, #5a6a3d 0%, #6b7d4a 100%);
            box-shadow: 0 0 15px rgba(234, 179, 8, 0.3);
        }

        #btnLights.lights-high {
            background: linear-gradient(135deg, #7d8a4a 0%, #92a156 100%);
            box-shadow: 0 0 25px rgba(234, 179, 8, 0.6);
        }

        /* Sirena */
        #btnSiren.siren-active {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            animation: sirenFlash 0.5s infinite;
        }

        @keyframes sirenFlash {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.8);
            }
            50% { 
                box-shadow: 0 0 30px rgba(239, 68, 68, 0.8);
            }
        }

        .control-group {
            background: #2d3548;
            padding: 20px;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            box-shadow: 0 -5px 30px rgba(0, 0, 0, 0.4);
        }

        .control-buttons {
            display: flex;
            gap: 15px;
        }

        .control-btn {
            width: 100px;
            height: 100px;
            background: #4a5568;
            border: none;
            border-radius: 18px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            font-size: 2.5rem;
            color: white;
            transition: all 0.1s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            user-select: none;
        }

        .control-btn:active,
        .control-btn.active {
            background: #5a6678;
            transform: scale(0.95);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
        }

        /* Bot√≥n acelerar - Verde sut√≠l */
        #btnAccelerate {
            background: linear-gradient(135deg, #3d5a4a 0%, #4a6856 100%);
        }

        #btnAccelerate:active,
        #btnAccelerate.active {
            background: linear-gradient(135deg, #4a6856 0%, #56785f 100%);
        }

        /* Bot√≥n frenar - Rojo sut√≠l */
        #btnBrake {
            background: linear-gradient(135deg, #5a3d3d 0%, #6b4a4a 100%);
        }

        #btnBrake.active,
        #btnBrake:active {
            background: linear-gradient(135deg, #6b4a4a 0%, #7d5656 100%);
        }

        .btn-label {
            font-size: 0.65rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            opacity: 0.9;
        }

        .key-hint {
            font-size: 0.85rem;
            color: #6b7280;
            text-align: center;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .status-panel {
                min-width: 300px;
                gap: 15px;
                padding: 15px 20px;
            }

            .status-label {
                font-size: 0.9rem;
                padding: 10px 15px;
            }

            .control-btn {
                width: 80px;
                height: 80px;
                font-size: 2rem;
            }

            .controls-bottom {
                padding: 20px;
            }

            .control-group {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            .status-panel {
                min-width: 250px;
                gap: 10px;
                padding: 12px 15px;
            }

            .status-label {
                font-size: 0.8rem;
                padding: 8px 12px;
            }

            .control-btn {
                width: 70px;
                height: 70px;
                font-size: 1.8rem;
            }

            .controls-bottom {
                padding: 15px;
                gap: 10px;
            }

            .control-group {
                padding: 12px;
            }

            .key-hint {
                font-size: 0.75rem;
            }
        }
    </style>
</head>
<body>
    <button class="menu-btn">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <div class="header-container">
        <h1>Control Digital</h1>
        <div class="status-panel">
            <div class="status-label" id="status1">Modo Carrera</div>
            <div class="status-label" id="status2">---</div>
        </div>
    </div>

    <div class="controls-bottom">
        <!-- Controles de direcci√≥n (izquierda) -->
        <div class="control-group">
            <div class="control-buttons">
                <button class="control-btn" id="btnLeft" data-action="izquierda">‚Äπ</button>
                <button class="control-btn" id="btnRight" data-action="derecha">‚Ä∫</button>
            </div>
            <div class="key-hint">A/D o ‚Üê/‚Üí</div>
        </div>

        <!-- Controles de funciones (centro) -->
        <div class="center-controls">
            <button class="function-btn" id="btnHazard">
                <span>‚ö†</span>
                <span class="btn-text">Preventivas</span>
                <span style="font-size: 0.5rem; opacity: 0.6;">1</span>
            </button>
            <button class="function-btn" id="btnTurnLeft">
                <span>‚óÑ</span>
                <span class="btn-text">Izq</span>
                <span style="font-size: 0.5rem; opacity: 0.6;">2</span>
            </button>
            <button class="function-btn" id="btnTurnRight">
                <span>‚ñ∫</span>
                <span class="btn-text">Der</span>
                <span style="font-size: 0.5rem; opacity: 0.6;">3</span>
            </button>
            <button class="function-btn lights-off" id="btnLights">
                <span id="lightIcon">üí°</span>
                <span class="btn-text">Luces</span>
                <span style="font-size: 0.5rem; opacity: 0.6;">4</span>
            </button>
            <button class="function-btn" id="btnSiren">
                <span>üö®</span>
                <span class="btn-text">Sirena</span>
                <span style="font-size: 0.5rem; opacity: 0.6;">5</span>
            </button>
            <button class="function-btn" id="btnHorn">
                <span>üì¢</span>
                <span class="btn-text">Claxon</span>
                <span style="font-size: 0.5rem; opacity: 0.6;">6</span>
            </button>
        </div>

        <!-- Controles de velocidad (derecha) -->
        <div class="control-group">
            <div class="control-buttons">
                <button class="control-btn" id="btnAccelerate" data-action="acelerar">
                    <span>‚àß</span>
                    <span class="btn-label">GAS</span>
                </button>
                <button class="control-btn" id="btnBrake" data-action="frenar">
                    <span>‚à®</span>
                    <span class="btn-label">BRAKE</span>
                </button>
            </div>
            <div class="key-hint">W/S o ‚Üë/‚Üì</div>
        </div>
    </div>

    <script>
        const buttons = {
            left: document.getElementById('btnLeft'),
            right: document.getElementById('btnRight'),
            accelerate: document.getElementById('btnAccelerate'),
            brake: document.getElementById('btnBrake')
        };

        const status1 = document.getElementById('status1');
        const status2 = document.getElementById('status2');

        // Estado actual de las acciones
        const activeActions = new Set();

        // Mapeo de teclas a botones
        const keyMap = {
            'a': 'left',
            'd': 'right',
            'ArrowLeft': 'left',
            'ArrowRight': 'right',
            'w': 'accelerate',
            's': 'brake',
            'ArrowUp': 'accelerate',
            'ArrowDown': 'brake'
        };

        const actionMessages = {
            'left': 'Girando Izquierda',
            'right': 'Girando Derecha',
            'accelerate': 'Acelerando',
            'brake': 'Frenando'
        };

        // Funci√≥n para actualizar el panel de estado
        function updateStatusPanel() {
            const actions = Array.from(activeActions);
            
            if (actions.length === 0) {
                status1.textContent = 'Modo Carrera';
                status1.classList.remove('active');
                status2.textContent = '---';
                status2.classList.remove('active');
            } else if (actions.length === 1) {
                status1.textContent = actionMessages[actions[0]];
                status1.classList.add('active');
                status2.textContent = '---';
                status2.classList.remove('active');
            } else {
                // M√°ximo 2 acciones
                status1.textContent = actionMessages[actions[0]];
                status1.classList.add('active');
                status2.textContent = actionMessages[actions[1]];
                status2.classList.add('active');
            }
        }

        // Funci√≥n para activar un bot√≥n
        function activateButton(buttonKey) {
            const button = buttons[buttonKey];
            if (button && activeActions.size < 2) {
                button.classList.add('active');
                activeActions.add(buttonKey);
                updateStatusPanel();
            }
        }

        // Funci√≥n para desactivar un bot√≥n
        function deactivateButton(buttonKey) {
            const button = buttons[buttonKey];
            if (button) {
                button.classList.remove('active');
                activeActions.delete(buttonKey);
                updateStatusPanel();
            }
        }

        // Eventos de teclado
        document.addEventListener('keydown', (e) => {
            const key = e.key.toLowerCase();
            const buttonKey = keyMap[key] || keyMap[e.key];
            
            if (buttonKey && !activeActions.has(buttonKey)) {
                e.preventDefault();
                activateButton(buttonKey);
            }

            // Teclas num√©ricas para funciones del veh√≠culo
            switch(e.key) {
                case '1':
                    e.preventDefault();
                    btnHazard.click();
                    break;
                case '2':
                    e.preventDefault();
                    btnTurnLeft.click();
                    break;
                case '3':
                    e.preventDefault();
                    btnTurnRight.click();
                    break;
                case '4':
                    e.preventDefault();
                    btnLights.click();
                    break;
                case '5':
                    e.preventDefault();
                    btnSiren.click();
                    break;
                case '6':
                    e.preventDefault();
                    btnHorn.click();
                    break;
            }
        });

        document.addEventListener('keyup', (e) => {
            const key = e.key.toLowerCase();
            const buttonKey = keyMap[key] || keyMap[e.key];
            
            if (buttonKey) {
                e.preventDefault();
                deactivateButton(buttonKey);
            }
        });

        // Eventos t√°ctiles/clic para cada bot√≥n
        Object.keys(buttons).forEach(key => {
            const button = buttons[key];
            
            // Mouse/touch start
            button.addEventListener('mousedown', () => activateButton(key));
            button.addEventListener('touchstart', (e) => {
                e.preventDefault();
                activateButton(key);
            });
            
            // Mouse/touch end
            button.addEventListener('mouseup', () => deactivateButton(key));
            button.addEventListener('mouseleave', () => deactivateButton(key));
            button.addEventListener('touchend', (e) => {
                e.preventDefault();
                deactivateButton(key);
            });
        });

        // Prevenir comportamiento por defecto de las flechas
        window.addEventListener('keydown', (e) => {
            if(['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
                e.preventDefault();
            }
        });

        // ========== FUNCIONES DEL VEH√çCULO ==========
        
        const btnHazard = document.getElementById('btnHazard');
        const btnTurnLeft = document.getElementById('btnTurnLeft');
        const btnTurnRight = document.getElementById('btnTurnRight');
        const btnLights = document.getElementById('btnLights');
        const btnSiren = document.getElementById('btnSiren');
        const btnHorn = document.getElementById('btnHorn');
        const lightIcon = document.getElementById('lightIcon');

        let hazardActive = false;
        let turnLeftActive = false;
        let turnRightActive = false;
        let lightsMode = 0; // 0: apagadas, 1: bajas, 2: altas
        let sirenActive = false;
        let hornActive = false;

        // Preventivas
        btnHazard.addEventListener('click', () => {
            hazardActive = !hazardActive;
            
            if (hazardActive) {
                btnHazard.classList.add('blink-active');
                // Desactivar direccionales individuales
                turnLeftActive = false;
                turnRightActive = false;
                btnTurnLeft.classList.remove('blink-active');
                btnTurnRight.classList.remove('blink-active');
            } else {
                btnHazard.classList.remove('blink-active');
            }
        });

        // Direccional izquierda
        btnTurnLeft.addEventListener('click', () => {
            turnLeftActive = !turnLeftActive;
            
            if (turnLeftActive) {
                btnTurnLeft.classList.add('blink-active');
                // Desactivar preventivas y direccional derecha
                hazardActive = false;
                turnRightActive = false;
                btnHazard.classList.remove('blink-active');
                btnTurnRight.classList.remove('blink-active');
            } else {
                btnTurnLeft.classList.remove('blink-active');
            }
        });

        // Direccional derecha
        btnTurnRight.addEventListener('click', () => {
            turnRightActive = !turnRightActive;
            
            if (turnRightActive) {
                btnTurnRight.classList.add('blink-active');
                // Desactivar preventivas y direccional izquierda
                hazardActive = false;
                turnLeftActive = false;
                btnHazard.classList.remove('blink-active');
                btnTurnLeft.classList.remove('blink-active');
            } else {
                btnTurnRight.classList.remove('blink-active');
            }
        });

        // Luces (3 modos)
        btnLights.addEventListener('click', () => {
            lightsMode = (lightsMode + 1) % 3;
            
            // Remover todas las clases
            btnLights.classList.remove('lights-off', 'lights-low', 'lights-high');
            
            if (lightsMode === 0) {
                btnLights.classList.add('lights-off');
                lightIcon.textContent = 'üí°';
            } else if (lightsMode === 1) {
                btnLights.classList.add('lights-low');
                lightIcon.textContent = 'üîÖ';
            } else {
                btnLights.classList.add('lights-high');
                lightIcon.textContent = 'üîÜ';
            }
        });

        // Sirena
        btnSiren.addEventListener('click', () => {
            sirenActive = !sirenActive;
            
            if (sirenActive) {
                btnSiren.classList.add('siren-active');
            } else {
                btnSiren.classList.remove('siren-active');
            }
        });

        // Claxon
        btnHorn.addEventListener('click', () => {
            hornActive = !hornActive;
            
            if (hornActive) {
                btnHorn.classList.add('horn-active');
            } else {
                btnHorn.classList.remove('horn-active');
            }
        });
    </script>
</body>
</html>